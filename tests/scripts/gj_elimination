#! /usr/bin/perl

#*
# This is a simple test driver to check Gauss-Jordan elimination
# package.
#
# INPUT:
#
# A data stream with a rectangular matrix, one matrix row per file
# line, e.g.:
#
# 2 3 4
# 5 7 9
#
# OUTPUT:
#
# Reduced row-eschelon form of the matrix, with all-zeros lines
# omitted.
#**

use strict;
use warnings;

use FindBin;
use lib "$FindBin::Bin/../../src/lib/perl5";
use COD::Algebra::GaussJordan qw(gj_elimination);

my $debug = 0;

my @matrix = map {[split]} <>;

if( $debug ) {
    print "#MATRIX:\n";

    print_matrix( @matrix );

    print "#ELIMINATED:\n";
}

my $eliminated = gj_elimination( \@matrix, 1e-6 );

print_matrix( @{$eliminated} );

sub print_matrix
{
    my @matrix = @_;
    
    local $\ = "\n";
    local $, = "\t";

    for (@matrix) {
        print @$_;
    }
}
